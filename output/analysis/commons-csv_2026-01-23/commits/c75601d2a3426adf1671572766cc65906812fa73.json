{
  "commit_hash": "c75601d2a3426adf1671572766cc65906812fa73",
  "parent_hash": "76981db68af50e0475a2d5d0fcc6bdf87efb18f1",
  "basic_info": {
    "project": "commons-csv",
    "commit_hash": "c75601d2a3426adf1671572766cc65906812fa73",
    "short_hash": "c75601d2",
    "parent_hash": "76981db68af50e0475a2d5d0fcc6bdf87efb18f1",
    "parent_short_hash": "76981db6",
    "author": "Gary Gregory",
    "date": "2025-01-02 20:14:43",
    "message": "Use final",
    "message_subject": "Use final"
  },
  "file_changes": {
    "source_files": [
      {
        "path": "src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java",
        "change_type": "modified",
        "old_path": null,
        "is_java": true
      }
    ],
    "test_files": [
      {
        "path": "src/test/java/org/apache/commons/csv/JiraCsv196Test.java",
        "change_type": "modified",
        "old_path": null,
        "is_java": true
      }
    ],
    "other_files": [],
    "summary": {
      "total_files": 2,
      "source_count": 1,
      "test_count": 1,
      "other_count": 0
    }
  },
  "method_changes": {
    "source_methods": [
      {
        "class": "ExtendedBufferedReader",
        "method": "getEncodedCharLength",
        "parameters": [
          "int"
        ],
        "start_line": 136,
        "end_line": 152,
        "file": "src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java",
        "package": "org.apache.commons.csv"
      }
    ],
    "test_methods": [
      {
        "class": "JiraCsv196Test",
        "method": "getTestInput",
        "parameters": [
          "String"
        ],
        "start_line": 32,
        "end_line": 34,
        "file": "src/test/java/org/apache/commons/csv/JiraCsv196Test.java",
        "package": "org.apache.commons.csv",
        "is_test_method": false
      }
    ],
    "summary": {
      "source_methods_count": 1,
      "test_methods_count": 1
    }
  },
  "diff_info": {
    "full_diff": "diff --git a/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java b/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java\nindex 31890db8..957c78bb 100644\n--- a/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java\n+++ b/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java\n@@ -78,7 +78,7 @@ final class ExtendedBufferedReader extends UnsynchronizedBufferedReader {\n      * @param charset the character set for encoding, or {@code null} if not applicable.\n      * @param enableByteTracking {@code true} to enable byte tracking; {@code false} to disable it.\n      */\n-    ExtendedBufferedReader(final Reader reader, Charset charset, boolean enableByteTracking) {\n+    ExtendedBufferedReader(final Reader reader, final Charset charset, final boolean enableByteTracking) {\n         super(reader);\n         if (charset != null && enableByteTracking) {\n             encoder = charset.newEncoder();\n@@ -133,22 +133,21 @@ final class ExtendedBufferedReader extends UnsynchronizedBufferedReader {\n      * @return the byte length of the character.\n      * @throws CharacterCodingException if the character cannot be encoded.\n      */\n-    private int getEncodedCharLength(int current) throws CharacterCodingException {\n+    private int getEncodedCharLength(final int current) throws CharacterCodingException {\n         final char cChar = (char) current;\n         final char lChar = (char) lastChar;\n         if (!Character.isSurrogate(cChar)) {\n             return encoder.encode(\n                 CharBuffer.wrap(new char[] {cChar})).limit();\n+        }\n+        if (Character.isHighSurrogate(cChar)) {\n+            // Move on to the next char (low surrogate)\n+            return 0;\n+        } else if (Character.isSurrogatePair(lChar, cChar)) {\n+            return encoder.encode(\n+                CharBuffer.wrap(new char[] {lChar, cChar})).limit();\n         } else {\n-            if (Character.isHighSurrogate(cChar)) {\n-                // Move on to the next char (low surrogate)\n-                return 0;\n-            } else if (Character.isSurrogatePair(lChar, cChar)) {\n-                return encoder.encode(\n-                    CharBuffer.wrap(new char[] {lChar, cChar})).limit();\n-            } else {\n-                throw new CharacterCodingException();\n-            }\n+            throw new CharacterCodingException();\n         }\n     }\n \ndiff --git a/src/test/java/org/apache/commons/csv/JiraCsv196Test.java b/src/test/java/org/apache/commons/csv/JiraCsv196Test.java\nindex 3a4b09ca..54d28256 100644\n--- a/src/test/java/org/apache/commons/csv/JiraCsv196Test.java\n+++ b/src/test/java/org/apache/commons/csv/JiraCsv196Test.java\n@@ -29,7 +29,7 @@ import org.junit.jupiter.api.Test;\n \n public class JiraCsv196Test {\n \n-    private Reader getTestInput(String path) {\n+    private Reader getTestInput(final String path) {\n         return new InputStreamReader(ClassLoader.getSystemClassLoader().getResourceAsStream(path));\n     }\n ",
    "source_only_diff": "diff --git a/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java b/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java\nindex 31890db8..957c78bb 100644\n--- a/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java\n+++ b/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java\n@@ -78,7 +78,7 @@ final class ExtendedBufferedReader extends UnsynchronizedBufferedReader {\n      * @param charset the character set for encoding, or {@code null} if not applicable.\n      * @param enableByteTracking {@code true} to enable byte tracking; {@code false} to disable it.\n      */\n-    ExtendedBufferedReader(final Reader reader, Charset charset, boolean enableByteTracking) {\n+    ExtendedBufferedReader(final Reader reader, final Charset charset, final boolean enableByteTracking) {\n         super(reader);\n         if (charset != null && enableByteTracking) {\n             encoder = charset.newEncoder();\n@@ -133,22 +133,21 @@ final class ExtendedBufferedReader extends UnsynchronizedBufferedReader {\n      * @return the byte length of the character.\n      * @throws CharacterCodingException if the character cannot be encoded.\n      */\n-    private int getEncodedCharLength(int current) throws CharacterCodingException {\n+    private int getEncodedCharLength(final int current) throws CharacterCodingException {\n         final char cChar = (char) current;\n         final char lChar = (char) lastChar;\n         if (!Character.isSurrogate(cChar)) {\n             return encoder.encode(\n                 CharBuffer.wrap(new char[] {cChar})).limit();\n+        }\n+        if (Character.isHighSurrogate(cChar)) {\n+            // Move on to the next char (low surrogate)\n+            return 0;\n+        } else if (Character.isSurrogatePair(lChar, cChar)) {\n+            return encoder.encode(\n+                CharBuffer.wrap(new char[] {lChar, cChar})).limit();\n         } else {\n-            if (Character.isHighSurrogate(cChar)) {\n-                // Move on to the next char (low surrogate)\n-                return 0;\n-            } else if (Character.isSurrogatePair(lChar, cChar)) {\n-                return encoder.encode(\n-                    CharBuffer.wrap(new char[] {lChar, cChar})).limit();\n-            } else {\n-                throw new CharacterCodingException();\n-            }\n+            throw new CharacterCodingException();\n         }\n     }\n \n",
    "test_only_diff": "diff --git a/src/test/java/org/apache/commons/csv/JiraCsv196Test.java b/src/test/java/org/apache/commons/csv/JiraCsv196Test.java\nindex 3a4b09ca..54d28256 100644\n--- a/src/test/java/org/apache/commons/csv/JiraCsv196Test.java\n+++ b/src/test/java/org/apache/commons/csv/JiraCsv196Test.java\n@@ -29,7 +29,7 @@ import org.junit.jupiter.api.Test;\n \n public class JiraCsv196Test {\n \n-    private Reader getTestInput(String path) {\n+    private Reader getTestInput(final String path) {\n         return new InputStreamReader(ClassLoader.getSystemClassLoader().getResourceAsStream(path));\n     }\n ",
    "stats": {
      "source_files": 1,
      "test_files": 1,
      "filtered": true
    }
  },
  "has_method_changes": true,
  "v1_execution": {
    "version": "v1",
    "commit_used": "76981db68af50e0475a2d5d0fcc6bdf87efb18f1",
    "build": {
      "success": true,
      "duration_seconds": 13.637574,
      "command": "mvn compile -DskipTests",
      "return_code": 0,
      "stdout": "",
      "stderr": ""
    },
    "test": {
      "success": true,
      "duration_seconds": 46.855662,
      "total_tests": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "errors": 0,
      "failed_tests": [],
      "error_tests": [],
      "return_code": -1,
      "stdout": "",
      "stderr": ""
    },
    "coverage": {
      "available": true,
      "jacoco_report_path": "/tmp/tubench_analysis_worktrees/commons-csv_343000/commons-csv_76981db6_v1_20260123_140017_357106/target/site/jacoco/jacoco.xml",
      "line_coverage": 0.994299674267101,
      "covered_lines": 1221,
      "total_lines": 1228
    },
    "worktree_path": "/tmp/tubench_analysis_worktrees/commons-csv_343000/commons-csv_76981db6_v1_20260123_140017_357106"
  },
  "v05_execution": {
    "version": "v05",
    "commit_used": "76981db68af50e0475a2d5d0fcc6bdf87efb18f1",
    "build": {
      "success": true,
      "duration_seconds": 13.138699,
      "command": "mvn compile -DskipTests",
      "return_code": 0,
      "stdout": "",
      "stderr": ""
    },
    "test": {
      "success": true,
      "duration_seconds": 34.240704,
      "total_tests": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "errors": 0,
      "failed_tests": [],
      "error_tests": [],
      "return_code": -1,
      "stdout": "",
      "stderr": ""
    },
    "coverage": {
      "available": true,
      "jacoco_report_path": "/tmp/tubench_analysis_worktrees/commons-csv_343000/commons-csv_76981db6_v05_20260123_140017_358949/target/site/jacoco/jacoco.xml",
      "line_coverage": 0.994299674267101,
      "covered_lines": 1221,
      "total_lines": 1228
    },
    "worktree_path": "/tmp/tubench_analysis_worktrees/commons-csv_343000/commons-csv_76981db6_v05_20260123_140017_358949",
    "patch_applied": true
  },
  "t05_execution": {
    "version": "t05",
    "commit_used": "76981db68af50e0475a2d5d0fcc6bdf87efb18f1",
    "build": {
      "success": true,
      "duration_seconds": 13.36021,
      "command": "mvn compile -DskipTests",
      "return_code": 0,
      "stdout": "",
      "stderr": ""
    },
    "test": {
      "success": true,
      "duration_seconds": 61.50194,
      "total_tests": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "errors": 0,
      "failed_tests": [],
      "error_tests": [],
      "return_code": -1,
      "stdout": "",
      "stderr": ""
    },
    "coverage": {
      "available": true,
      "jacoco_report_path": "/tmp/tubench_analysis_worktrees/commons-csv_343000/commons-csv_76981db6_t05_20260123_140017_359815/target/site/jacoco/jacoco.xml",
      "line_coverage": 0.994299674267101,
      "covered_lines": 1221,
      "total_lines": 1228
    },
    "worktree_path": "/tmp/tubench_analysis_worktrees/commons-csv_343000/commons-csv_76981db6_t05_20260123_140017_359815",
    "patch_applied": true
  },
  "v0_execution": {
    "version": "v0",
    "commit_used": "c75601d2a3426adf1671572766cc65906812fa73",
    "build": {
      "success": true,
      "duration_seconds": 13.318366,
      "command": "mvn compile -DskipTests",
      "return_code": 0,
      "stdout": "",
      "stderr": ""
    },
    "test": {
      "success": false,
      "duration_seconds": 120.071649,
      "total_tests": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "errors": 0,
      "failed_tests": [
        {
          "class": "org.apache.commons.csv.JiraCsv196Test",
          "method": "testParseFourBytes",
          "full_name": "org.apache.commons.csv.JiraCsv196Test.testParseFourBytes",
          "failure_type": "org.opentest4j.AssertionFailedError",
          "message": "index 3 ==> expected: <701> but was: <1901>",
          "stack_trace": "org.opentest4j.AssertionFailedError: index 3 ==> expected: <701> but was: <1901>\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)\n\tat org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)\n\tat org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:166)\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:664)\n\tat org.apache.commons.csv.JiraCsv196Test.testParseFourBytes(JiraCsv196Test.java:44)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n"
        },
        {
          "class": "org.apache.commons.csv.JiraCsv196Test",
          "method": "testParseThreeBytes",
          "full_name": "org.apache.commons.csv.JiraCsv196Test.testParseThreeBytes",
          "failure_type": "org.opentest4j.AssertionFailedError",
          "message": "index 3 ==> expected: <242> but was: <398>",
          "stack_trace": "org.opentest4j.AssertionFailedError: index 3 ==> expected: <242> but was: <398>\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)\n\tat org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)\n\tat org.junit.jupiter.api.AssertEquals.failNotEqual(AssertEquals.java:197)\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:166)\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:664)\n\tat org.apache.commons.csv.JiraCsv196Test.testParseThreeBytes(JiraCsv196Test.java:57)\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n"
        }
      ],
      "error_tests": [],
      "return_code": -1,
      "stdout": "",
      "stderr": ""
    },
    "coverage": {
      "available": false
    },
    "worktree_path": "/tmp/tubench_analysis_worktrees/commons-csv_343000/commons-csv_c75601d2_v0_20260123_140017_361178"
  },
  "classification": {},
  "qualified": false,
  "analysis_timestamp": "2026-01-23T14:02:31.097669"
}